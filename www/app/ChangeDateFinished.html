<form name="settingsForm" class="form-horizontal" data-toggle="validator">
    <div class="col-xs-6">
        <div class="form-group">
            <label for="datestarted" class="control-label col-xs-4 label-required">{{'SETTINGS.DATESTARTED'| translate}}*:</label>

            <div class="controls col-xs-8">
                <div class="input-prepend input-group"
                     data-ng-class="{'has-error': settingsForm.datestarted.$invalid}">
                    <input type="text" required value="" startrange
                           data-ng-model="activity.dateStarted" class="form-control"
                           id="datestarted" name="datestarted">
                </div>
            </div>
            <div class="form-group">
            </div>
            <label for="datefinished" class="control-label col-xs-4 label-required">{{'SETTINGS.DATEFINISHED' | translate}}*:</label>

            <div class="controls col-xs-8">
                <div class="input-prepend input-group"
                     data-ng-class="{'has-error': settingsForm.datefinished.$invalid}">
                    <input type="text" required value="" data-ng-model="activity.dateFinished" endrange
                           class="form-control" id="datefinished" name="datefinished">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="reasonofreduction" class="control-label col-xs-4 label-required">{{'SETTINGS.REASONOFREDUCTION'| translate}}*:</label>

            <div class="col-xs-8" data-ng-class="{'has-error': activity.reasonOfReduction == ''}">
                <select id="reasonofreduction" required data-ng-model="activity.reasonOfReduction"
                        data-ng-options="c for c in activityConfigData.regulationReasons track by c" class="form-control"></select>
            </div>
        </div>
        <div class="form-group">
            <label for="currentReductionPower" class="control-label col-xs-4">Bisherige Abregelleistung:</label>
            <div class="col-xs-8">
                <div class="input-group input-group-sm">
                    <input id="currentReductionPower" type="number" readonly data-ng-model="activity.activePowerJpaToBeReduced.value"
                           data-area-describedby="requiredreductionaddon" class="form-control">
                    <span class="input-group-addon">MW</span>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="requiredAdditionalReductionPower"
                   data-ng-class="{'has-error': settingsForm.requiredAdditionalReductionPower.$invalid}"
                   class="control-label col-xs-4 label-required">Zusaetzliche Abregelleistung*:</label>
            <div class="col-xs-8">
                <div class="input-group input-group-sm"
                     data-ng-class="{'has-error': activity.activePowerJpaToBeReduced.additionalReductionPowerValue == ''}">
                    <input type="number" required data-ng-model="activity.activePowerJpaToBeReduced.additionalReductionPowerValue"
                           data-area-describedby="requiredreductionaddon"
                           name="requiredAdditionalReductionPower" id="requiredAdditionalReductionPower"
                           class="form-control">
                    <span id="requiredreductionaddon" class="input-group-addon">MW</span>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-xs-4">{{'SETTINGS.WHOLEAREA' | translate}}:</label>
            <div class="col-xs-8">
                <div class="list-group">
                    <a href="#" class="list-group-item">
                        <p ng-repeat="region in activity.subGeographicalRegionJpaList" class="list-group-item-text">
                            {{region.name}}
                            <div ng-repeat="subStation in region.substationJpaList" class="list-group">
                                <a href="#" class="list-group-item">
                                    <p class="list-group-item-text">
                                        {{subStation.name}}
                                    </p>
                                </a>
                            </div>
                        </p>    
                    </a>
            </div>
            </div>
        </div>
        <div class="form-group">
            <label for="description" class="control-label col-xs-4 label-required">{{'SETTINGS.DESCRIPTION' | translate}}*:</label>

            <div class="col-xs-8" data-ng-class="{'has-error': activity.description == ''}">
                <textarea id="description" required data-ng-model="activity.description" rows="3"
                          class="form-control"></textarea>
            </div>
        </div>
        <div class="form-group">
            *{{'MANDATORY' | translate}}
        </div>
    </div>
    <div class="col-xs-12">
        <div class="alert alert-warning"
             data-ng-show="settingsFormSubmitted &&
                (settingsForm.datestarted.$error.required || settingsForm.datefinished.$error.required
                || isNoValidTimeInterval(activity.dateStarted, activity.dateFinished)
                || activity.reasonOfReduction == ''
                || settingsForm.requiredReductionPower.$invalid
                || settingsFormSubmitted && isNoAreaDefined()
                || activity.description == '' || activity.practise == '')">
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && settingsForm.datestarted.$error.required">
                    {{'SETTINGS.DATESTARTED.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && settingsForm.datefinished.$error.required">
                    {{'SETTINGS.DATEFINISHED.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && isNoValidTimeInterval(activity.dateStarted, activity.dateFinished)">
                    {{'SETTINGS.DATEINTERVAL.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && activity.reasonOfReduction == ''">
                    {{'SETTINGS.REASONOFREDUCTION.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && settingsForm.requiredReductionPower.$invalid">
                    {{'SETTINGS.REQUIREDREDUCTION.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && isNoAreaDefined()">
                    {{'SETTINGS.AREA.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && activity.description == ''">
                    {{'SETTINGS.DESCRIPTION.ERROR' | translate}}
                </normal>
            </div>
            <div>
                <normal class="warning"
                        data-ng-show="settingsFormSubmitted && activity.practise == ''">
                    {{'SETTINGS.PRACTICE.ERROR' | translate}}
                </normal>
            </div>
        </div>
        <div class="col-xs-12 voffset">
            <div class="form-group">
                <div class="col-xs-12">
                    <div class="btn-group" role="group">
                        <button class="btn btn-default btn-sm"
                                ui-sref="Regulation.CreateDownRegulation">
                            {{'BACK' | translate}}
                        </button>
                        <button class="btn btn-default btn-sm" ui-sref="state1({show: 'Aktiv'})">
                            {{'CANCEL' | translate}}
                        </button>
                    </div>
                    <div class="btn-group pull-right" role="group">
                        <button data-ng-click="saveAndReturn()"
                                data-ng-disabled="!settingsForm.$valid"
                                class="btn btn-primary btn-sm">
                            {{'SETTINGS.SAVEACTIVITYANDRETURN' | translate}}
                        </button>
                        <button class="btn btn-primary btn-sm"
                                data-ng-click="gotoStationList(settingsForm)">
                            {{'SETTINGS.CREATEADVICE'| translate}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="app/libs/eismandaterangepicker.js"></script>
</form>
